<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nhận diện chữ số AI</title>
  <link rel="stylesheet" href="static/style.css">
</head>
<body>
  <div class="container">
    <h1>Nhận diện chữ số AI</h1>
    <p style="color: #ffeb3b; font-size: 16px; margin-bottom: 20px;">
      Lưu ý: Đảm bảo nền đen và chữ số màu trắng để hệ thống nhận diện chính xác.
    </p>
    <canvas id="canvas" width="400" height="400"></canvas>
    <div class="controls">
      <label for="thickness">Độ dày nét bút:</label>
      <input type="range" id="thickness" min="5" max="50" value="15">
      <span id="thicknessValue">15</span>
      <br><br>
      <label for="colorPicker">Màu nét bút:</label>
      <input type="color" id="colorPicker" value="#ffffff">
      <br><br>
      <label for="bgColorPicker">Màu nền:</label>
      <input type="color" id="bgColorPicker" value="#000000">
    </div>
    <div>
      <button class="clear-btn" onclick="clearCanvas()">Xóa</button>
      <button class="predict-btn" onclick="predict()">Dự đoán</button>
      <button class="dialog-btn" onclick="openDialog()">Hướng dẫn</button>
      <button class="dialog-btn" onclick="openImageDialog()">Chọn ảnh</button>
      <!-- Input ẩn để chọn ảnh từ máy -->
      <input type="file" id="imageInput" accept="image/*" style="display:none;">
    </div>
    <div id="result" class="result">Vẽ số và nhấn "Dự đoán"</div>
    <!-- Thêm mục cảnh báo -->
    <div id="warning-section" style="margin-top: 20px; padding: 10px; border-radius: 8px; background: rgba(255,0,0,0.08); color: #ff4b5c; font-weight: bold; display: none; box-shadow: 0 0 10px #ff4b5c;">
      <span id="warning-title" style="font-size:18px;">⚠️ Cảnh báo:</span>
      <div id="warning-digits" style="margin-top:10px; font-weight:normal;"></div>
    </div>
    <div id="background-results" style="margin-top: 20px;"></div>
    
    <h2>Các bước xử lý ảnh</h2>
    <div class="tab-buttons">
      <button class="tab-button active" onclick="showTab('overview')">Tổng quan</button>
      <button class="tab-button" onclick="showTab('details')">Chi tiết</button>
    </div>
    
    <div id="overview-tab" class="tab-content">
      <div class="step-container">
        <div class="step-title">Kết quả nhận diện</div>
        <div class="digit-container" id="digits-overview"></div>
      </div>
    </div>
    
    <div id="details-tab" class="tab-content" style="display:none;">
      <div class="steps" id="steps-details"></div>
    </div>
  </div>

  <!-- Hộp thoại hướng dẫn -->
  <dialog id="guideDialog">
    <h2>Hướng dẫn sử dụng</h2>
    <p>1. Dùng chuột vẽ số trên canvas hoặc chọn ảnh từ máy tính.</p>
    <p>2. Chỉnh độ dày và màu nét bút theo ý muốn.</p>
    <p>3. Nhấn "Dự đoán" để hệ thống nhận diện số.</p>
    <p>4. Nhấn "Xóa" để làm mới canvas.</p>
    <p>5. Xem các bước xử lý ảnh ở phần "Tổng quan" hoặc "Chi tiết".</p>
    <button onclick="closeDialog()">Đóng</button>
  </dialog>

  <script src="static/main.js"></script>
</body>
</html>
